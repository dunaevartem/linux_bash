#!/bin/bash
# del_logs.sh
# Запрашиваем директорию для поиска
read -p "Введите директорию для поиска (или нажмите Enter чтобы искать файлы в текущей директории): " dir

# Если пользователь не ввел ничего, устанавливаем текущую директорию
if [ -z "$dir" ]; then
    dir="."
fi

# Проверяем, существует ли директория
if [ ! -d "$dir" ]; then
    echo "Директория не найдена"
    exit 1
fi

# Запрашиваем количество дней
read -p "Введите кол-во дней старше которых нужно искать файлы: " days

# Ищем файлы с расширением .log, старше указанного количества дней
files=($(find "$dir" -type f -name "*.log" -mtime +$days))

# Проверяем, найдены ли файлы
if [ ${#files[@]} -eq 0 ]; then
    echo "Не найдены .log файлы с задаными параметрами"
    exit 1
fi

# Выводим список найденных файлов
echo "Найдены .log файлы:"
for file in "${files[@]}"; do
    echo "$file"
done

# Запрашиваем подтверждение на удаление
read -p "Удалить данные файлы? (y/n): " confirm

if [ "$confirm" == "y" ]; then
    # Удаляем файлы
    for file in "${files[@]}"; do
        rm -f "$file"
    done
    echo "Файлы удалены"
else
    echo "Завершение работы программы"
fi
